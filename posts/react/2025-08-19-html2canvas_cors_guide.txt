1:"$Sreact.fragment"
2:I[51458,["2619","static/chunks/2619-04bc32f026a0d946.js","7720","static/chunks/7720-a4d9d3edf996d8ef.js","7177","static/chunks/app/layout-6849ab202b22ed25.js"],"ThemeProvider"]
3:I[67655,["2619","static/chunks/2619-04bc32f026a0d946.js","7720","static/chunks/7720-a4d9d3edf996d8ef.js","7177","static/chunks/app/layout-6849ab202b22ed25.js"],"Analytics"]
4:I[67655,["2619","static/chunks/2619-04bc32f026a0d946.js","7720","static/chunks/7720-a4d9d3edf996d8ef.js","7177","static/chunks/app/layout-6849ab202b22ed25.js"],"GoogleAds"]
5:I[52619,["1848","static/chunks/02b2f66c-e808af2a0ee9dd00.js","2619","static/chunks/2619-04bc32f026a0d946.js","2554","static/chunks/2554-e225077d892b52bd.js","6156","static/chunks/app/posts/%5B...slug%5D/page-932bc826430ae8b6.js"],""]
6:I[449,["2619","static/chunks/2619-04bc32f026a0d946.js","7720","static/chunks/7720-a4d9d3edf996d8ef.js","7177","static/chunks/app/layout-6849ab202b22ed25.js"],"ThemeToggle"]
7:I[9766,[],""]
8:I[98924,[],""]
f:I[57150,[],""]
:HL["/_next/static/media/e4af272ccee01ff0-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/cccb392035531e6f.css","style"]
0:{"P":null,"b":"OD8H2GT4IUyCmwXrTWBV7","p":"","c":["","posts","react","2025-08-19-html2canvas_cors_guide"],"i":false,"f":[[["",{"children":["posts",{"children":[["slug","react/2025-08-19-html2canvas_cors_guide","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/cccb392035531e6f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_f367f3 antialiased min-h-screen","children":["$","$L2",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"disableTransitionOnChange":true,"children":["$","div",null,{"className":"flex min-h-screen flex-col","children":[["$","$L3",null,{}],["$","$L4",null,{}],["$","header",null,{"className":"sticky top-0 z-50 w-full border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/80","children":["$","div",null,{"className":"container max-w-4xl mx-auto flex h-16 items-center justify-between px-4","children":[["$","$L5",null,{"href":"/","className":"flex items-center space-x-2 text-xl font-semibold transition-colors hover:text-primary","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-file-text h-6 w-6 text-primary","aria-hidden":"true","children":[["$","path","1rqfz7",{"d":"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["$","path","tnqrlb",{"d":"M14 2v4a2 2 0 0 0 2 2h4"}],["$","path","b1mrlr",{"d":"M10 9H8"}],["$","path","t4e002",{"d":"M16 13H8"}],["$","path","z1uh3a",{"d":"M16 17H8"}],"$undefined"]}],["$","span",null,{"children":"Blog"}]]}],["$","div",null,{"className":"flex items-center space-x-6","children":[["$","nav",null,{"className":"flex items-center space-x-6","children":[["$","$L5",null,{"href":"/","className":"text-sm font-medium text-muted-foreground transition-colors hover:text-foreground","children":"홈"}],["$","$L5",null,{"href":"/tags","className":"text-sm font-medium text-muted-foreground transition-colors hover:text-foreground","children":"태그"}],["$","$L5",null,{"href":"/about","className":"text-sm font-medium text-muted-foreground transition-colors hover:text-foreground","children":"소개"}]]}],["$","a",null,{"href":"https://github.com/leeduhan","target":"_blank","rel":"noopener noreferrer","className":"text-muted-foreground transition-colors hover:text-foreground","aria-label":"GitHub","children":["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-github h-5 w-5","aria-hidden":"true","children":[["$","path","tonef",{"d":"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}],["$","path","9comsn",{"d":"M9 18c-4.51 2-5-2-7-2"}],"$undefined"]}]}],["$","$L6",null,{}]]}]]}]}],["$","main",null,{"className":"flex-1","children":["$","div",null,{"className":"container max-w-4xl mx-auto px-4 py-8","children":["$","$L7",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],"$L9"]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}],"$La"]}]}]}]}]]}],{"children":["posts","$Lb",{"children":[["slug","react/2025-08-19-html2canvas_cors_guide","c"],"$Lc",{"children":["__PAGE__","$Ld",{},null,false]},null,false]},null,false]},null,false],"$Le",false]],"m":"$undefined","G":["$f",[]],"s":false,"S":true}
11:I[24431,[],"OutletBoundary"]
13:I[15278,[],"AsyncMetadataOutlet"]
15:I[24431,[],"ViewportBoundary"]
17:I[24431,[],"MetadataBoundary"]
18:"$Sreact.suspense"
9:["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]
a:["$","footer",null,{"className":"border-t py-8 md:py-12","children":["$","div",null,{"className":"container max-w-4xl mx-auto px-4","children":["$","div",null,{"className":"flex flex-col items-center justify-center space-y-4 text-center","children":[["$","div",null,{"className":"flex items-center space-x-4 text-sm","children":[["$","a",null,{"href":"/rss.xml","className":"text-muted-foreground hover:text-primary transition-colors","target":"_blank","rel":"noopener noreferrer","children":"RSS"}],["$","span",null,{"className":"text-muted-foreground","children":"•"}],["$","a",null,{"href":"/feed.json","className":"text-muted-foreground hover:text-primary transition-colors","target":"_blank","rel":"noopener noreferrer","children":"JSON Feed"}]]}],["$","p",null,{"className":"text-sm text-muted-foreground","children":["© 2025.06 ~ ",2025,".",9," Blog"]}]]}]}]}]
b:["$","$1","c",{"children":[null,["$","$L7",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
c:["$","$1","c",{"children":[null,["$","$L7",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
d:["$","$1","c",{"children":["$L10",null,["$","$L11",null,{"children":["$L12",["$","$L13",null,{"promise":"$@14"}]]}]]}]
e:["$","$1","h",{"children":[null,[["$","$L15",null,{"children":"$L16"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$L17",null,{"children":["$","div",null,{"hidden":true,"children":["$","$18",null,{"fallback":null,"children":"$L19"}]}]}]]}]
10:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Next.js 15에서 html2canvas CORS 에러 해결하기: 이미지 프록시 솔루션\",\"description\":\"html2canvas 사용 시 외부 CDN 이미지로 인한 CORS 에러를 Next.js API Route 프록시로 완벽 해결한 과정과 다양한 해결 방법들을 상세히 소개합니다.\",\"image\":[\"https://leeduhan.github.io/og-image.jpg\"],\"author\":{\"@type\":\"Person\",\"name\":\"zeke\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Blog\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https://leeduhan.github.io/logo.png\"}},\"url\":\"https://leeduhan.github.io/posts/react/2025-08-19-html2canvas_cors_guide\",\"datePublished\":\"2025-08-19\",\"dateModified\":\"2025-08-19\",\"keywords\":\"Next.js, html2canvas, CORS, React, TypeScript, 이미지 프록시\",\"articleSection\":\"Technology\",\"inLanguage\":\"ko-KR\"}"}}],["$","div",null,{"className":"max-w-3xl mx-auto space-y-8","children":[["$","div",null,{"className":"pt-4","children":["$","$L5",null,{"href":"/","className":"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left h-4 w-4","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],["$","span",null,{"children":"홈으로 돌아가기"}]]}]}],["$","article",null,{"className":"space-y-8","children":[["$","header",null,{"className":"space-y-6","children":[["$","div",null,{"className":"space-y-6","children":["$","h1",null,{"className":"text-5xl font-bold tracking-tight leading-tight","children":"Next.js 15에서 html2canvas CORS 에러 해결하기: 이미지 프록시 솔루션"}]}],["$","div",null,{"className":"flex flex-wrap items-center gap-6 text-sm text-muted-foreground py-4","children":[["$","time",null,{"dateTime":"2025-08-19","className":"flex items-center gap-2","children":[["$","span",null,{"children":"📅"}],"2025년 8월 19일"]}],["$","div",null,{"className":"flex flex-wrap items-center gap-2","children":[["$","span",null,{"children":"🏷️"}],[["$","$L5","Next.js",{"href":"/tags/nextjs","className":"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-accent text-accent-foreground hover:bg-primary hover:text-primary-foreground transition-colors","children":"Next.js"}],["$","$L5","html2canvas",{"href":"/tags/html2canvas","className":"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-accent text-accent-foreground hover:bg-primary hover:text-primary-foreground transition-colors","children":"html2canvas"}],["$","$L5","CORS",{"href":"/tags/cors","className":"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-accent text-accent-foreground hover:bg-primary hover:text-primary-foreground transition-colors","children":"CORS"}],["$","$L5","React",{"href":"/tags/react","className":"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-accent text-accent-foreground hover:bg-primary hover:text-primary-foreground transition-colors","children":"React"}],["$","$L5","TypeScript",{"href":"/tags/typescript","className":"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-accent text-accent-foreground hover:bg-primary hover:text-primary-foreground transition-colors","children":"TypeScript"}],["$","$L5","이미지 프록시",{"href":"/tags/image-proxy","className":"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-accent text-accent-foreground hover:bg-primary hover:text-primary-foreground transition-colors","children":"이미지 프록시"}]]]}]]}],["$","div",null,{"className":"bg-accent/50 rounded-lg p-6 border-l-4 border-primary","children":["$","p",null,{"className":"text-lg leading-relaxed italic text-muted-foreground","children":"html2canvas 사용 시 외부 CDN 이미지로 인한 CORS 에러를 Next.js API Route 프록시로 완벽 해결한 과정과 다양한 해결 방법들을 상세히 소개합니다."}]}]]}],"$L1a"]}]]}]]
1a:["$","div",null,{"className":"notion-content","children":"$L1b"}]
1c:I[5746,["1848","static/chunks/02b2f66c-e808af2a0ee9dd00.js","2619","static/chunks/2619-04bc32f026a0d946.js","2554","static/chunks/2554-e225077d892b52bd.js","6156","static/chunks/app/posts/%5B...slug%5D/page-932bc826430ae8b6.js"],"CodeBlock"]
1b:[["$","h1",null,{"id":"nextjs-15에서-html2canvas-cors-에러-해결하기-이미지-프록시-솔루션","children":"Next.js 15에서 html2canvas CORS 에러 해결하기: 이미지 프록시 솔루션"}],"\n",["$","p",null,{"children":"html2canvas를 사용해 화면 캡처 기능을 구현하다 보면 외부 CDN 이미지로 인한 CORS 에러를 자주 만나게 됩니다. 이 글에서는 여러 해결 방법을 비교 분석하고, 실제로 성공한 Next.js API Route 프록시 솔루션을 상세히 공유합니다."}],"\n",["$","h2",null,{"id":"-목차","children":"📋 목차"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9%EA%B3%BC-%EC%9B%90%EC%9D%B8","children":"문제 상황과 원인"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-%EB%B9%84%EA%B5%90","children":"해결 방법 비교"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#%EC%8B%A4%EC%A0%9C-%EC%84%B1%EA%B3%B5%ED%95%9C-%ED%95%B4%EA%B2%B0%EC%B1%85-nextjs-%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%94%84%EB%A1%9D%EC%8B%9C","children":"실제 성공한 해결책: Next.js 이미지 프록시"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#%EB%8C%80%EC%95%88-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95%EB%93%A4","children":"대안 해결 방법들"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%8F-%EC%B6%94%EA%B0%80-%ED%8C%81","children":"성능 최적화 및 추가 팁"}]}],"\n"]}],"\n",["$","h2",null,{"id":"문제-상황과-원인","children":"문제 상황과 원인"}],"\n",["$","p",null,{"children":"웹 애플리케이션에서 html2canvas를 사용해 화면을 캡처하려고 했는데 다음과 같은 CORS 에러가 발생했습니다:"}],"\n",["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"code-highlight","data-language":"","children":["$","code",null,{"className":"code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":"Access to image at 'https://cdn.example.com/images/my-image.svg' \n"}],["$","span",null,{"className":"code-line line-number","line":"2","children":"from origin 'http://localhost:3001' has been blocked by CORS policy: \n"}],["$","span",null,{"className":"code-line line-number","line":"3","children":"No 'Access-Control-Allow-Origin' header is present on the requested resource.\n"}]]}]}]}],"\n",["$","h3",null,{"id":"근본-원인","children":"근본 원인"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"html2canvas의 작동 방식"}],": DOM을 Canvas로 그리는 과정에서 Canvas API를 사용"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Same-Origin Policy"}],": 브라우저의 보안 정책으로 인한 크로스 도메인 이미지 접근 제한"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"외부 CDN 이미지"}],": CORS 헤더를 제공하지 않는 외부 도메인 이미지"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"브라우저 캐싱"}],": 첫 번째 요청 시 CORS 헤더가 없으면 캐시된 이미지도 동일한 문제 발생"]}],"\n"]}],"\n",["$","h2",null,{"id":"해결-방법-비교","children":"해결 방법 비교"}],"\n",["$","p",null,{"children":"여러 해결 방법을 시도해본 결과, 각각의 장단점을 정리하면 다음과 같습니다:"}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"순위"}],["$","th",null,{"children":"방법"}],["$","th",null,{"children":"난이도"}],["$","th",null,{"children":"효과"}],["$","th",null,{"children":"적용 범위"}],["$","th",null,{"children":"권장도"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"🏆"}],["$","td",null,{"children":["$","strong",null,{"children":"Next.js API Route 프록시"}]}],["$","td",null,{"children":"⭐⭐"}],["$","td",null,{"children":"⭐⭐⭐⭐⭐"}],["$","td",null,{"children":"프로덕션"}],["$","td",null,{"children":["✅ ",["$","strong",null,{"children":"최고"}]]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"🥈"}],["$","td",null,{"children":"Next.js Image + 커스텀 로더"}],["$","td",null,{"children":"⭐⭐⭐"}],["$","td",null,{"children":"⭐⭐⭐⭐⭐"}],["$","td",null,{"children":"고급"}],["$","td",null,{"children":"✅ 권장"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"🥉"}],["$","td",null,{"children":"next.config.js Rewrites"}],["$","td",null,{"children":"⭐"}],["$","td",null,{"children":"⭐⭐⭐⭐"}],["$","td",null,{"children":"간편"}],["$","td",null,{"children":"⚠️ 제한적"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"4"}],["$","td",null,{"children":"클라이언트 최적화"}],["$","td",null,{"children":"⭐"}],["$","td",null,{"children":"⭐⭐⭐"}],["$","td",null,{"children":"즉시"}],["$","td",null,{"children":"⚠️ 임시방편"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"5"}],["$","td",null,{"children":"Middleware CORS"}],["$","td",null,{"children":"⭐⭐⭐"}],["$","td",null,{"children":"⭐⭐⭐"}],["$","td",null,{"children":"전역"}],["$","td",null,{"children":"❌ 복잡함"}]]}]]}]]}],"\n",["$","h3",null,{"id":"1-클라이언트-최적화-즉시-적용-가능-️","children":"1. 클라이언트 최적화 (즉시 적용 가능) ⚠️"}],"\n",["$","p",null,{"children":"가장 빠르게 적용할 수 있는 임시 해결책입니다:"}],"\n",["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":"$L1d"}]}],"\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66","\n","$L67","\n","$L68","\n","$L69","\n","$L6a","\n","$L6b","\n","$L6c","\n","$L6d","\n","$L6e","\n","$L6f","\n","$L70","\n","$L71","\n","$L72","\n","$L73"]
9c:I[67846,["1848","static/chunks/02b2f66c-e808af2a0ee9dd00.js","2619","static/chunks/2619-04bc32f026a0d946.js","2554","static/chunks/2554-e225077d892b52bd.js","6156","static/chunks/app/posts/%5B...slug%5D/page-932bc826430ae8b6.js"],"Mermaid"]
1d:["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"import"}]," html2canvas ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'html2canvas'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"3","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"captureElement"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token comment","children":"// 이미지들을 캐시 무효화로 미리 로드"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," images ",["$","span",null,{"className":"token operator","children":"="}]," document",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"querySelectorAll"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'img'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"all"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["    ",["$","span",null,{"className":"token builtin","children":"Array"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"from"}],["$","span",null,{"className":"token punctuation","children":"("}],"images",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"map"}],["$","span",null,{"className":"token punctuation","children":"("}],"img ",["$","span",null,{"className":"token operator","children":"=>"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["      ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],"img",["$","span",null,{"className":"token punctuation","children":"."}],"src ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token string","children":"?t="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"Date",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"now"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["        cache",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'no-cache'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],"$L74","$L75","$L76","$L77","$L78","$L79","$L7a","$L7b","$L7c","$L7d","$L7e","$L7f","$L80","$L81","$L82","$L83"]}]
1e:["$","p",null,{"children":[["$","strong",null,{"children":"장점"}],": 즉시 적용 가능, 별도 서버 설정 불필요",["$","br",null,{}],"\n",["$","strong",null,{"children":"단점"}],": 브라우저 캐싱 문제로 불안정, 근본적 해결책 아님"]}]
1f:["$","h3",null,{"id":"2-nextconfigjs-rewrites-간단한-프록시-️","children":"2. next.config.js Rewrites (간단한 프록시) ⚠️"}]
20:["$","p",null,{"children":"설정만으로 간단히 해결하는 방법:"}]
21:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-javascript code-highlight","data-language":"javascript","children":["$","code",null,{"className":"language-javascript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// next.config.js"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token doc-comment comment","children":["/** ",["$","span",null,{"className":"token keyword","children":"@type"}]," ",["$","span",null,{"className":"token class-name","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token keyword","children":"import"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'next'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],"NextConfig",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," */"]}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":[["$","span",null,{"className":"token keyword","children":"const"}]," nextConfig ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token function","children":"rewrites"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["    ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["      ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["        ",["$","span",null,{"className":"token literal-property property","children":"source"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'/api/images/:path*'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["        ",["$","span",null,{"className":"token literal-property property","children":"destination"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'https://external-domain.com/:path*'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["    ",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["  ",["$","span",null,{"className":"token literal-property property","children":"images"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"13","children":["    ",["$","span",null,{"className":"token literal-property property","children":"remotePatterns"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"14","children":["      ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"15","children":["        ",["$","span",null,{"className":"token literal-property property","children":"protocol"}],"$L84"," ","$L85","$L86","\n"]}],"$L87","$L88","$L89","$L8a","$L8b","$L8c","$L8d"]}]}]}]
22:["$","p",null,{"children":[["$","strong",null,{"children":"장점"}],": 설정만으로 해결, Next.js 내장 기능 활용",["$","br",null,{}],"\n",["$","strong",null,{"children":"단점"}],": 특정 도메인에만 제한적, 동적 URL 처리 어려움"]}]
23:["$","h3",null,{"id":"3-nextjs-image--커스텀-로더-권장-","children":"3. Next.js Image + 커스텀 로더 (권장) ✅"}]
24:["$","p",null,{"children":"Next.js Image 컴포넌트의 강력한 기능을 활용:"}]
25:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// components/ProxyImage.tsx"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token string","children":"'use client'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"4","children":[["$","span",null,{"className":"token keyword","children":"import"}]," Image ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'next/image'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"6","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"customLoader"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," src",["$","span",null,{"className":"token punctuation","children":","}]," width",["$","span",null,{"className":"token punctuation","children":","}]," quality ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["  src",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  width",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["  quality",["$","span",null,{"className":"token operator","children":"?"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["  ",["$","span",null,{"className":"token comment","children":"// 외부 도메인 이미지는 프록시를 통해 로드"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"startsWith"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'http'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"&&"}]," ",["$","span",null,{"className":"token operator","children":"!"}],"src",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"includes"}],["$","span",null,{"className":"token punctuation","children":"("}],"window",["$","span",null,{"className":"token punctuation","children":"."}],"location",["$","span",null,{"className":"token punctuation","children":"."}],"hostname",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],"$L8e","$L8f","$L90","$L91","$L92","$L93","$L94","$L95","$L96","$L97","$L98","$L99","$L9a","$L9b"]}]}]}]
26:["$","p",null,{"children":[["$","strong",null,{"children":"장점"}],": 자동 최적화, WebP 변환, 레이지 로딩, 반응형 지원",["$","br",null,{}],"\n",["$","strong",null,{"children":"단점"}],": Next.js Image API 학습 필요, 약간 복잡함"]}]
27:["$","h2",null,{"id":"실제-성공한-해결책-nextjs-이미지-프록시","children":"실제 성공한 해결책: Next.js 이미지 프록시"}]
28:["$","p",null,{"children":["여러 해결 방법을 시도한 결과, ",["$","strong",null,{"children":"Next.js API Route를 활용한 이미지 프록시"}]," 방식이 가장 안정적이고 효과적인 솔루션이었습니다. 이 방법으로 프로덕션 환경에서 완전히 문제를 해결할 수 있었습니다."]}]
29:["$","h3",null,{"id":"핵심-아이디어","children":"핵심 아이디어"}]
2a:["$","p",null,{"children":"외부 CDN 이미지를 직접 사용하지 않고, Next.js 서버를 경유해서 이미지를 프록시하여 CORS 헤더를 추가하는 방식입니다:"}]
2b:["$","$L9c",null,{"chart":"sequenceDiagram\n    participant Browser as Browser\n    participant API as Next.js API Route\n    participant CDN as External CDN\n\n    Browser->>API: Image Request (/api/image-proxy?url=...)\n    Note over API: Prepare CORS Headers\n    API->>CDN: Fetch External Image\n    CDN-->>API: Image Data Response\n    Note over API: Add CORS Headers\n    API-->>Browser: Image + CORS Headers\n    Note over Browser: html2canvas can use<br/>without CORS issues"}]
2c:["$","h3",null,{"id":"1단계-api-route-프록시-엔드포인트-생성","children":"1단계: API Route 프록시 엔드포인트 생성"}]
2d:["$","p",null,{"children":"가장 핵심이 되는 서버사이드 프록시 엔드포인트를 구현합니다:"}]
2e:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// app/api/image-proxy/route.ts"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":","}]," NextResponse ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'next/server'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"4","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token constant","children":"GET"}],["$","span",null,{"className":"token punctuation","children":"("}],"request",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," searchParams ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"URL"}]}],["$","span",null,{"className":"token punctuation","children":"("}],"request",["$","span",null,{"className":"token punctuation","children":"."}],"url",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," imageUrl ",["$","span",null,{"className":"token operator","children":"="}]," searchParams",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'url'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"imageUrl",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," NextResponse",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," error",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'URL parameter is required'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," status",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"400"}]," ","$L9d","$L9e","$L9f","\n"]}],"$La0","$La1","$La2","$La3","$La4","$La5","$La6","$La7","$La8","$La9","$Laa","$Lab","$Lac","$Lad","$Lae","$Laf","$Lb0","$Lb1","$Lb2","$Lb3","$Lb4","$Lb5","$Lb6","$Lb7","$Lb8","$Lb9","$Lba","$Lbb","$Lbc","$Lbd","$Lbe","$Lbf","$Lc0","$Lc1","$Lc2","$Lc3","$Lc4","$Lc5","$Lc6","$Lc7","$Lc8","$Lc9","$Lca","$Lcb","$Lcc","$Lcd","$Lce","$Lcf","$Ld0"]}]}]}]
2f:["$","h3",null,{"id":"2단계-proxyimage-컴포넌트-구현","children":"2단계: ProxyImage 컴포넌트 구현"}]
30:["$","p",null,{"children":"외부 이미지를 자동으로 프록시를 통해 로드하는 컴포넌트를 만듭니다:"}]
31:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// components/ProxyImage.tsx"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token string","children":"'use client'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"4","children":[["$","span",null,{"className":"token keyword","children":"import"}]," Image",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ImageLoader",["$","span",null,{"className":"token punctuation","children":","}]," ImageProps ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'next/image'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," useState ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'react'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"7","children":[["$","span",null,{"className":"token comment","children":"// 외부 도메인 이미지인지 확인 (SSR 안전)"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":[["$","span",null,{"className":"token keyword","children":"const"}]," isExternalImage ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"boolean"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["  ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," url ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"URL"}]}],["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," url",["$","span",null,{"className":"token punctuation","children":"."}],"protocol ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"'http:'"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," url",["$","span",null,{"className":"token punctuation","children":"."}],"protocol ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"'https:'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ","$Ld1","\n"]}],"$Ld2","$Ld3","$Ld4","$Ld5","$Ld6","$Ld7","$Ld8","$Ld9","$Lda","$Ldb","$Ldc","$Ldd","$Lde","$Ldf","$Le0","$Le1","$Le2","$Le3","$Le4","$Le5","$Le6","$Le7","$Le8","$Le9","$Lea","$Leb","$Lec","$Led","$Lee","$Lef","$Lf0","$Lf1","$Lf2","$Lf3","$Lf4","$Lf5","$Lf6","$Lf7","$Lf8","$Lf9","$Lfa","$Lfb","$Lfc","$Lfd","$Lfe","$Lff","$L100"]}]}]}]
32:["$","h3",null,{"id":"3단계-컴포넌트-교체","children":"3단계: 컴포넌트 교체"}]
33:["$","p",null,{"children":"이제 기존 이미지 컴포넌트를 ProxyImage로 교체하기만 하면 됩니다."}]
34:["$","p",null,{"children":[["$","strong",null,{"children":"교체 과정"}],":"]}]
35:["$","ol",null,{"children":["\n",["$","li",null,{"children":["기존 ",["$","code",null,{"children":"<Image>"}]," 또는 ",["$","code",null,{"children":"<img>"}]," 태그를 ",["$","code",null,{"children":"<ProxyImage>"}],"로 변경"]}],"\n",["$","li",null,{"children":"외부 CDN URL을 사용하는 이미지들을 우선적으로 교체"}],"\n",["$","li",null,{"children":["필요에 따라 ",["$","code",null,{"children":"fallbackSrc"}]," prop으로 대체 이미지 지정"]}],"\n",["$","li",null,{"children":["기존 props(",["$","code",null,{"children":"width"}],", ",["$","code",null,{"children":"height"}],", ",["$","code",null,{"children":"className"}]," 등)은 그대로 유지 가능"]}],"\n"]}]
36:["$","p",null,{"children":[["$","strong",null,{"children":"핵심 포인트"}],": ProxyImage는 Next.js Image와 동일한 API를 제공하므로, 기존 코드의 변경 없이도 CORS 문제를 해결할 수 있습니다."]}]
37:["$","h3",null,{"id":"4단계-html2canvas와-함께-사용","children":"4단계: html2canvas와 함께 사용"}]
38:["$","p",null,{"children":"html2canvas로 캡처할 때 ProxyImage가 포함된 컴포넌트를 캡처하면 CORS 문제 없이 정상 작동합니다:"}]
39:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"import"}]," html2canvas ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'html2canvas'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"3","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"handleCapture"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," element ",["$","span",null,{"className":"token operator","children":"="}]," document",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"querySelector"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'[data-capture-target]'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"as"}]," HTMLElement",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":"  \n"}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"element",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," canvas ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"html2canvas"}],["$","span",null,{"className":"token punctuation","children":"("}],"element",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["      useCORS",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["      allowTaint",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["      scale",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"2"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"13","children":["      backgroundColor",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'#ffffff'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],"$L101","$L102","$L103","$L104","$L105","$L106","$L107","$L108","$L109","$L10a","$L10b"]}]}]}]
3a:["$","h2",null,{"id":"핵심-구현-포인트","children":"핵심 구현 포인트"}]
3b:["$","h3",null,{"id":"1-보안-고려사항","children":"1. 보안 고려사항"}]
3c:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// 허용된 도메인만 프록시"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"const"}]," allowedDomains ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["  ",["$","span",null,{"className":"token string","children":"'cdn.example.com'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token string","children":"'assets.mysite.com'"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":[["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"7","children":[["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"allowedDomains",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"includes"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":"."}],"hostname",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," NextResponse",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," error",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Domain not allowed'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," status",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"403"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}]}]
3d:["$","p",null,{"children":"허용된 도메인만 프록시하여 보안 위험을 방지합니다."}]
3e:["$","h3",null,{"id":"2-ssr-호환성","children":"2. SSR 호환성"}]
3f:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"const"}]," isExternalImage ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"boolean"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," url ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"URL"}]}],["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["    ",["$","span",null,{"className":"token comment","children":"// window.location이 아닌 프로토콜로 판단하여 SSR 안전성 확보"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," url",["$","span",null,{"className":"token punctuation","children":"."}],"protocol ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"'http:'"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," url",["$","span",null,{"className":"token punctuation","children":"."}],"protocol ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"'https:'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]}]
40:["$","p",null,{"children":["서버사이드 렌더링에서도 안전하게 작동하도록 ",["$","code",null,{"children":"window"}]," 객체 의존성을 제거했습니다."]}]
41:["$","h3",null,{"id":"3-캐시-최적화","children":"3. 캐시 최적화"}]
42:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":["headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  ",["$","span",null,{"className":"token string-property property","children":"'Content-Type'"}],["$","span",null,{"className":"token operator","children":":"}]," contentType",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["  ",["$","span",null,{"className":"token string-property property","children":"'Cache-Control'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'public, max-age=31536000, immutable'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Origin'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'*'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Methods'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'GET'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Headers'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Content-Type'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}]}]
43:["$","p",null,{"children":"이미지를 1년간 캐시하여 성능을 최적화합니다."}]
44:["$","h2",null,{"id":"트러블슈팅","children":"트러블슈팅"}]
45:["$","h3",null,{"id":"1-hydration-mismatch-에러","children":"1. Hydration Mismatch 에러"}]
46:["$","p",null,{"children":[["$","strong",null,{"children":"문제"}],": 서버와 클라이언트에서 다른 URL 생성으로 인한 Hydration 에러",["$","br",null,{}],"\n",["$","strong",null,{"children":"해결"}],": ",["$","code",null,{"children":"window.location.origin"}]," 대신 프로토콜 기반으로 외부 이미지 판단"]}]
47:["$","h3",null,{"id":"2-무한-로딩","children":"2. 무한 로딩"}]
48:["$","p",null,{"children":[["$","strong",null,{"children":"문제"}],": 프록시 로더가 적용되지 않아 원본 URL로 요청",["$","br",null,{}],"\n",["$","strong",null,{"children":"해결"}],": SSR 안전한 로직으로 변경하여 서버/클라이언트 일관성 확보"]}]
49:["$","h2",null,{"id":"대안-해결-방법들","children":"대안 해결 방법들"}]
4a:["$","h3",null,{"id":"1-캐싱이-포함된-개선된-api-route","children":"1. 캐싱이 포함된 개선된 API Route"}]
4b:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// 메모리 캐시 추가"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"const"}]," imageCache ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["Map",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["$","span",null,{"className":"token class-name","children":["  data",["$","span",null,{"className":"token operator","children":":"}]," ArrayBuffer",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["$","span",null,{"className":"token class-name","children":["  contentType",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["$","span",null,{"className":"token class-name","children":["  timestamp",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}],["$","span",null,{"className":"code-line line-number","line":"6","children":[["$","span",null,{"className":"token class-name","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token constant","children":"CACHE_DURATION"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"1000"}]," ",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token number","children":"60"}]," ",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token number","children":"10"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// 10분 캐시"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"10","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token constant","children":"GET"}],["$","span",null,{"className":"token punctuation","children":"("}],"request",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["  ",["$","span",null,{"className":"token comment","children":"// 캐시 확인 로직 추가"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," cached ",["$","span",null,{"className":"token operator","children":"="}]," imageCache",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageUrl",["$","span",null,{"className":"token punctuation","children":")"}],"$L10c","\n"]}],"$L10d","$L10e","$L10f","$L110","$L111","$L112","$L113","$L114","$L115","$L116","$L117","$L118","$L119","$L11a","$L11b","$L11c","$L11d"]}]}]}]
4c:["$","h3",null,{"id":"2-대안-라이브러리-고려","children":"2. 대안 라이브러리 고려"}]
4d:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-bash code-highlight","data-language":"bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token function","children":"npm"}]," ",["$","span",null,{"className":"token function","children":"install"}]," modern-screenshot\n"]}]}]}]}]
4e:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," domToJpeg ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'modern-screenshot'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"const"}]," dataUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"domToJpeg"}],["$","span",null,{"className":"token punctuation","children":"("}],"element",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]}]
4f:["$","h2",null,{"id":"성능-최적화-및-추가-팁","children":"성능 최적화 및 추가 팁"}]
50:["$","h3",null,{"id":"1-html2canvas-최적화-설정","children":"1. html2canvas 최적화 설정"}]
51:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"const"}]," canvas ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"html2canvas"}],["$","span",null,{"className":"token punctuation","children":"("}],"element",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  useCORS",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["  allowTaint",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  scale",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"2"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  logging",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  backgroundColor",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'#ffffff'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["  foreignObjectRendering",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  imageTimeout",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"10000"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["  ",["$","span",null,{"className":"token function-variable function","children":"onclone"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"clonedDoc",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'문서 클론 완료'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]}]
52:["$","h3",null,{"id":"2-이미지-프리로딩","children":"2. 이미지 프리로딩"}]
53:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// 캡처 전 이미지 프리로딩"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"preloadImages"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"urls",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["  ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"all"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["    urls",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"map"}],["$","span",null,{"className":"token punctuation","children":"("}],"url ",["$","span",null,{"className":"token operator","children":"=>"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["      ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token string","children":"/api/image-proxy?url="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],["$","span",null,{"className":"token function","children":"encodeURIComponent"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["        cache",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'no-cache'"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["  ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]}]
54:["$","h2",null,{"id":"결과","children":"결과"}]
55:["$","p",null,{"children":["✅ ",["$","strong",null,{"children":"CORS 에러 해결"}],": 외부 CDN 이미지를 프록시를 통해 안전하게 로드",["$","br",null,{}],"\n","✅ ",["$","strong",null,{"children":"html2canvas 호환"}],": 캡처 기능이 정상적으로 작동",["$","br",null,{}],"\n","✅ ",["$","strong",null,{"children":"성능 최적화"}],": 이미지 캐싱 및 반응형 최적화",["$","br",null,{}],"\n","✅ ",["$","strong",null,{"children":"보안 강화"}],": 허용된 도메인만 프록시하여 보안 위험 방지",["$","br",null,{}],"\n","✅ ",["$","strong",null,{"children":"개발자 경험"}],": 기존 Image 컴포넌트와 동일한 API로 쉬운 사용"]}]
56:["$","h2",null,{"id":"마무리","children":"마무리"}]
57:["$","p",null,{"children":"Next.js의 API Route를 활용한 이미지 프록시 솔루션으로 CORS 문제를 깔끔하게 해결할 수 있었습니다. 특히 SSR 호환성과 보안을 고려한 설계로 프로덕션 환경에서도 안전하게 사용할 수 있는 솔루션이 되었습니다."}]
58:["$","h3",null,{"id":"권장-구현-순서","children":"권장 구현 순서"}]
59:["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"1단계"}],": API Route 프록시 엔드포인트 생성 (10분)"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"2단계"}],": ProxyImage 컴포넌트 구현 (20분)"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"3단계"}],": 기존 이미지 컴포넌트 교체 (5분)"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"4단계"}],": html2canvas 테스트 및 최적화 (15분)"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"5단계"}],": 성능 최적화 및 캐싱 추가 (선택사항)"]}],"\n"]}]
5a:["$","p",null,{"children":["이 순서대로 진행하면 ",["$","strong",null,{"children":"Next.js 15의 강력한 서버사이드 기능을 활용"}],"하여 html2canvas CORS 문제를 ",["$","strong",null,{"children":"가장 효율적으로 해결"}],"할 수 있습니다!"]}]
5b:["$","h3",null,{"id":"핵심-성과","children":"핵심 성과"}]
5c:["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"html2canvas 호환성"}],": 외부 CDN 이미지가 포함된 화면을 성공적으로 캡처"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"성능 최적화"}],": 이미지 캐싱과 반응형 최적화로 사용자 경험 향상"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"보안 강화"}],": 도메인 화이트리스트로 악의적 요청 차단"]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"개발자 경험"}],": 기존 Image 컴포넌트와 동일한 API로 쉬운 마이그레이션"]}],"\n"]}]
5d:["$","p",null,{"children":"이 방법은 html2canvas뿐만 아니라 Canvas API를 사용하는 다른 라이브러리(Fabric.js, Konva.js 등)에서도 동일하게 적용할 수 있어, 크로스 도메인 이미지 처리가 필요한 다양한 상황에서 유용할 것입니다."}]
5e:["$","hr",null,{}]
5f:["$","h2",null,{"id":"️-api-route-프록시-방식-주의사항","children":"⚠️ API Route 프록시 방식 주의사항"}]
60:["$","p",null,{"children":["API Route 프록시는 html2canvas CORS 문제를 해결하지만, ",["$","strong",null,{"children":"서버 리소스"}]," 측면에서 고려해야 할 사항이 있습니다:"]}]
61:["$","h3",null,{"id":"️-서버-리소스-문제","children":"🖼️ 서버 리소스 문제"}]
62:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-html code-highlight","data-language":"html","children":["$","code",null,{"className":"language-html code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"<!-- Next.js Image가 생성하는 HTML -->"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"img"]}]," ",["$","span",null,{"className":"token attr-name","children":"srcset"}],["$","span",null,{"className":"token attr-value","children":[["$","span",null,{"className":"token punctuation attr-equals","children":"="}],["$","span",null,{"className":"token punctuation","children":"\""}],"/api/image-proxy?url=...&w=256 256w,\n"]}]]}]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["$","span",null,{"className":"token tag","children":["$","span",null,{"className":"token attr-value","children":"             /api/image-proxy?url=...&w=384 384w,\n"}]}]}],["$","span",null,{"className":"code-line line-number","line":"4","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token attr-value","children":["             /api/image-proxy?url=...&w=640 640w",["$","span",null,{"className":"token punctuation","children":"\""}]]}]," ",["$","span",null,{"className":"token punctuation","children":"/>"}]]}],"\n"]}]]}]}]}]
63:["$","p",null,{"children":[["$","strong",null,{"children":"문제점"}],":"]}]
64:["$","ul",null,{"children":["\n",["$","li",null,{"children":["모든 이미지 요청이 서버를 거쳐감 → ",["$","strong",null,{"children":"서버 부하 증가"}]]}],"\n",["$","li",null,{"children":["여러 크기의 이미지가 서버 캐시에 저장 → ",["$","strong",null,{"children":"메모리 사용량 증가"}]]}],"\n",["$","li",null,{"children":["Vercel/Netlify 등에서 ",["$","strong",null,{"children":"Function timeout"}]," 발생 가능"]}],"\n"]}]
65:["$","h3",null,{"id":"-해결-방법","children":"💡 해결 방법"}]
66:["$","h4",null,{"id":"1-적극적인-캐시-정책","children":"1. 적극적인 캐시 정책"}]
67:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"NextResponse"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageBuffer",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["    ",["$","span",null,{"className":"token string-property property","children":"'Cache-Control'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'public, max-age=31536000, immutable'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["    ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Origin'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'*'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]}]
68:["$","h4",null,{"id":"2-cdn-활용","children":"2. CDN 활용"}]
69:["$","ul",null,{"children":["\n",["$","li",null,{"children":"CloudFlare, AWS CloudFront로 서버 부하 분산"}],"\n",["$","li",null,{"children":"이미지 크기 제한 (최대 5MB)"}],"\n",["$","li",null,{"children":"화이트리스트 도메인 관리"}],"\n"]}]
6a:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":[["$","strong",null,{"children":"📝 Next.js Image 컴포넌트 기술적 제한사항"}],": ",["$","code",null,{"children":"unoptimized"}],"와 ",["$","code",null,{"children":"loader"}]," 충돌 문제, SVG 처리 방법 등은 ",["$","a",null,{"href":"./2025-08-19-nextjs-15-image-optimization-guide","children":"다음 글"}],"에서 상세히 다룹니다."]}],"\n"]}]
6b:["$","h2",null,{"id":"-성능-최적화-및-추가-팁","children":"🚀 성능 최적화 및 추가 팁"}]
6c:["$","h3",null,{"id":"1-html2canvas-최적화-설정-1","children":"1. html2canvas 최적화 설정"}]
6d:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"const"}]," canvas ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"html2canvas"}],["$","span",null,{"className":"token punctuation","children":"("}],"element",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  useCORS",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["  allowTaint",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  scale",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"2"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  logging",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  backgroundColor",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'#ffffff'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["  foreignObjectRendering",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  imageTimeout",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"10000"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["  ",["$","span",null,{"className":"token function-variable function","children":"onclone"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"clonedDoc",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'문서 클론 완료'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]}]
6e:["$","h3",null,{"id":"2-이미지-프리로딩-1","children":"2. 이미지 프리로딩"}]
6f:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// 캡처 전 이미지 프리로딩"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"preloadImages"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"urls",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["  ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"all"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["    urls",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"map"}],["$","span",null,{"className":"token punctuation","children":"("}],"url ",["$","span",null,{"className":"token operator","children":"=>"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["      ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token string","children":"/api/image-proxy?url="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],["$","span",null,{"className":"token function","children":"encodeURIComponent"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["        cache",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'no-cache'"}]," \n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["  ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]}]
70:["$","h3",null,{"id":"3-메모리-캐시-추가-고급","children":"3. 메모리 캐시 추가 (고급)"}]
71:["$","div",null,{"className":"code-block-wrapper my-6","children":["$","$L1c",null,{"className":"language-typescript code-highlight","data-language":"typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token comment","children":"// 메모리 캐시 추가"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"const"}]," imageCache ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["Map",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["$","span",null,{"className":"token class-name","children":["  data",["$","span",null,{"className":"token operator","children":":"}]," ArrayBuffer",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["$","span",null,{"className":"token class-name","children":["  contentType",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["$","span",null,{"className":"token class-name","children":["  timestamp",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"number"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}],["$","span",null,{"className":"code-line line-number","line":"6","children":[["$","span",null,{"className":"token class-name","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token constant","children":"CACHE_DURATION"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"1000"}]," ",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token number","children":"60"}]," ",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token number","children":"10"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// 10분 캐시"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"10","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token constant","children":"GET"}],["$","span",null,{"className":"token punctuation","children":"("}],"request",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["  ",["$","span",null,{"className":"token comment","children":"// 캐시 확인 로직 추가"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," cached ",["$","span",null,{"className":"token operator","children":"="}]," imageCache",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageUrl",["$","span",null,{"className":"token punctuation","children":")"}],"$L11e","\n"]}],"$L11f","$L120","$L121","$L122","$L123","$L124","$L125","$L126","$L127","$L128","$L129","$L12a","$L12b","$L12c","$L12d","$L12e","$L12f"]}]}]}]
72:["$","h3",null,{"id":"-더-자세한-이미지-최적화-가이드","children":"📚 더 자세한 이미지 최적화 가이드"}]
73:["$","p",null,{"children":["Next.js 15의 공식 권장사항과 더 자세한 성능 비교를 원한다면 **",["$","a",null,{"href":"/posts/react/2025-08-19-nextjs-15-image-optimization-guide","children":"Next.js 15 이미지 최적화 완전 가이드"}],"**를 참고하세요."]}]
74:["$","span",null,{"className":"code-line line-number","line":"10","children":["        mode",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'cors'"}]," \n"]}]
75:["$","span",null,{"className":"code-line line-number","line":"11","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
76:["$","span",null,{"className":"code-line line-number","line":"12","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
77:["$","span",null,{"className":"code-line line-number","line":"13","children":["  ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
78:["$","span",null,{"className":"code-line line-number","line":"14","children":"\n"}]
79:["$","span",null,{"className":"code-line line-number","line":"15","children":["  ",["$","span",null,{"className":"token comment","children":"// html2canvas 실행"}],"\n"]}]
7a:["$","span",null,{"className":"code-line line-number","line":"16","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," canvas ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"html2canvas"}],["$","span",null,{"className":"token punctuation","children":"("}],"elementRef",["$","span",null,{"className":"token punctuation","children":"."}],"current",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
7b:["$","span",null,{"className":"code-line line-number","line":"17","children":["    useCORS",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
7c:["$","span",null,{"className":"code-line line-number","line":"18","children":["    allowTaint",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
7d:["$","span",null,{"className":"code-line line-number","line":"19","children":["    scale",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"2"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
7e:["$","span",null,{"className":"code-line line-number","line":"20","children":["    logging",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
7f:["$","span",null,{"className":"code-line line-number","line":"21","children":["    foreignObjectRendering",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],"\n"]}]
80:["$","span",null,{"className":"code-line line-number","line":"22","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
81:["$","span",null,{"className":"code-line line-number","line":"23","children":"\n"}]
82:["$","span",null,{"className":"code-line line-number","line":"24","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," canvas",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"toDataURL"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'image/png'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
83:["$","span",null,{"className":"code-line line-number","line":"25","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
84:["$","span",null,{"className":"token operator","children":":"}]
85:["$","span",null,{"className":"token string","children":"'https'"}]
86:["$","span",null,{"className":"token punctuation","children":","}]
87:["$","span",null,{"className":"code-line line-number","line":"16","children":["        ",["$","span",null,{"className":"token literal-property property","children":"hostname"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'**'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
88:["$","span",null,{"className":"code-line line-number","line":"17","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
89:["$","span",null,{"className":"code-line line-number","line":"18","children":["    ",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
8a:["$","span",null,{"className":"code-line line-number","line":"19","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
8b:["$","span",null,{"className":"code-line line-number","line":"20","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
8c:["$","span",null,{"className":"code-line line-number","line":"21","children":"\n"}]
8d:["$","span",null,{"className":"code-line line-number","line":"22","children":["module",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"exports"}]," ",["$","span",null,{"className":"token operator","children":"="}]," nextConfig",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
8e:["$","span",null,{"className":"code-line line-number","line":"13","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token string","children":"/api/proxy-image?url="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],["$","span",null,{"className":"token function","children":"encodeURIComponent"}],["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"&w="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"width",["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"&q="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"quality ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"75"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
8f:["$","span",null,{"className":"code-line line-number","line":"14","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
90:["$","span",null,{"className":"code-line line-number","line":"15","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," src",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
91:["$","span",null,{"className":"code-line line-number","line":"16","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
92:["$","span",null,{"className":"code-line line-number","line":"17","children":"\n"}]
93:["$","span",null,{"className":"code-line line-number","line":"18","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"default"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"ProxyImage"}],["$","span",null,{"className":"token punctuation","children":"("}],"props",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
94:["$","span",null,{"className":"code-line line-number","line":"19","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}]
95:["$","span",null,{"className":"code-line line-number","line":"20","children":["    ",["$","span",null,{"className":"token operator","children":"<"}],"Image\n"]}]
96:["$","span",null,{"className":"code-line line-number","line":"21","children":["      loader",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"customLoader",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
97:["$","span",null,{"className":"code-line line-number","line":"22","children":["      crossOrigin",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"anonymous\""}],"\n"]}]
98:["$","span",null,{"className":"code-line line-number","line":"23","children":["      ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],"props",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
99:["$","span",null,{"className":"code-line line-number","line":"24","children":["    ",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":">"}],"\n"]}]
9a:["$","span",null,{"className":"code-line line-number","line":"25","children":["  ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
9b:["$","span",null,{"className":"code-line line-number","line":"26","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
9d:["$","span",null,{"className":"token punctuation","children":"}"}]
9e:["$","span",null,{"className":"token punctuation","children":")"}]
9f:["$","span",null,{"className":"token punctuation","children":";"}]
a0:["$","span",null,{"className":"code-line line-number","line":"10","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
a1:["$","span",null,{"className":"code-line line-number","line":"11","children":"\n"}]
a2:["$","span",null,{"className":"code-line line-number","line":"12","children":["  ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
a3:["$","span",null,{"className":"code-line line-number","line":"13","children":["    ",["$","span",null,{"className":"token comment","children":"// 외부 이미지 URL 유효성 검사"}],"\n"]}]
a4:["$","span",null,{"className":"code-line line-number","line":"14","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," url ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"URL"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"decodeURIComponent"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageUrl",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
a5:["$","span",null,{"className":"code-line line-number","line":"15","children":"    \n"}]
a6:["$","span",null,{"className":"code-line line-number","line":"16","children":["    ",["$","span",null,{"className":"token comment","children":"// 허용된 도메인만 프록시 (보안상 중요)"}],"\n"]}]
a7:["$","span",null,{"className":"code-line line-number","line":"17","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," allowedDomains ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}]
a8:["$","span",null,{"className":"code-line line-number","line":"18","children":["      ",["$","span",null,{"className":"token string","children":"'cdn.example.com'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
a9:["$","span",null,{"className":"code-line line-number","line":"19","children":["      ",["$","span",null,{"className":"token string","children":"'assets.mysite.com'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
aa:["$","span",null,{"className":"code-line line-number","line":"20","children":["      ",["$","span",null,{"className":"token string","children":"'images.service.com'"}],"\n"]}]
ab:["$","span",null,{"className":"code-line line-number","line":"21","children":["    ",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
ac:["$","span",null,{"className":"code-line line-number","line":"22","children":"    \n"}]
ad:["$","span",null,{"className":"code-line line-number","line":"23","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"allowedDomains",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"includes"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":"."}],"hostname",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
ae:["$","span",null,{"className":"code-line line-number","line":"24","children":["      ",["$","span",null,{"className":"token keyword","children":"return"}]," NextResponse",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," error",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Domain not allowed'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," status",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"403"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
af:["$","span",null,{"className":"code-line line-number","line":"25","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
b0:["$","span",null,{"className":"code-line line-number","line":"26","children":"\n"}]
b1:["$","span",null,{"className":"code-line line-number","line":"27","children":["    ",["$","span",null,{"className":"token comment","children":"// 외부 이미지 fetch"}],"\n"]}]
b2:["$","span",null,{"className":"code-line line-number","line":"28","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," response ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"decodeURIComponent"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageUrl",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
b3:["$","span",null,{"className":"code-line line-number","line":"29","children":["      headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
b4:["$","span",null,{"className":"code-line line-number","line":"30","children":["        ",["$","span",null,{"className":"token string-property property","children":"'User-Agent'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Mozilla/5.0 (compatible; NextJS Image Proxy)'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
b5:["$","span",null,{"className":"code-line line-number","line":"31","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
b6:["$","span",null,{"className":"code-line line-number","line":"32","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
b7:["$","span",null,{"className":"code-line line-number","line":"33","children":"\n"}]
b8:["$","span",null,{"className":"code-line line-number","line":"34","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"response",["$","span",null,{"className":"token punctuation","children":"."}],"ok",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
b9:["$","span",null,{"className":"code-line line-number","line":"35","children":["      ",["$","span",null,{"className":"token keyword","children":"return"}]," NextResponse",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}]
ba:["$","span",null,{"className":"code-line line-number","line":"36","children":["        ",["$","span",null,{"className":"token punctuation","children":"{"}]," error",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token string","children":"Failed to fetch image: "}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"response",["$","span",null,{"className":"token punctuation","children":"."}],"status",["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
bb:["$","span",null,{"className":"code-line line-number","line":"37","children":["        ",["$","span",null,{"className":"token punctuation","children":"{"}]," status",["$","span",null,{"className":"token operator","children":":"}]," response",["$","span",null,{"className":"token punctuation","children":"."}],"status ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
bc:["$","span",null,{"className":"code-line line-number","line":"38","children":["      ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
bd:["$","span",null,{"className":"code-line line-number","line":"39","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
be:["$","span",null,{"className":"code-line line-number","line":"40","children":"\n"}]
bf:["$","span",null,{"className":"code-line line-number","line":"41","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," imageBuffer ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"arrayBuffer"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
c0:["$","span",null,{"className":"code-line line-number","line":"42","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," contentType ",["$","span",null,{"className":"token operator","children":"="}]," response",["$","span",null,{"className":"token punctuation","children":"."}],"headers",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'content-type'"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token string","children":"'image/jpeg'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
c1:["$","span",null,{"className":"code-line line-number","line":"43","children":"\n"}]
c2:["$","span",null,{"className":"code-line line-number","line":"44","children":["    ",["$","span",null,{"className":"token comment","children":"// 🔑 핵심: CORS 헤더와 함께 이미지 반환"}],"\n"]}]
c3:["$","span",null,{"className":"code-line line-number","line":"45","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"NextResponse"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageBuffer",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
c4:["$","span",null,{"className":"code-line line-number","line":"46","children":["      headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
c5:["$","span",null,{"className":"code-line line-number","line":"47","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Content-Type'"}],["$","span",null,{"className":"token operator","children":":"}]," contentType",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
c6:["$","span",null,{"className":"code-line line-number","line":"48","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Cache-Control'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'public, max-age=31536000, immutable'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
c7:["$","span",null,{"className":"code-line line-number","line":"49","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Origin'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'*'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
c8:["$","span",null,{"className":"code-line line-number","line":"50","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Methods'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'GET'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
c9:["$","span",null,{"className":"code-line line-number","line":"51","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Headers'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Content-Type'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
ca:["$","span",null,{"className":"code-line line-number","line":"52","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
cb:["$","span",null,{"className":"code-line line-number","line":"53","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
cc:["$","span",null,{"className":"code-line line-number","line":"54","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"error",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
cd:["$","span",null,{"className":"code-line line-number","line":"55","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Image proxy error:'"}],["$","span",null,{"className":"token punctuation","children":","}]," error",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
ce:["$","span",null,{"className":"code-line line-number","line":"56","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," NextResponse",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," error",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Failed to proxy image'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," status",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token number","children":"500"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
cf:["$","span",null,{"className":"code-line line-number","line":"57","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
d0:["$","span",null,{"className":"code-line line-number","line":"58","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
d1:["$","span",null,{"className":"token punctuation","children":"{"}]
d2:["$","span",null,{"className":"code-line line-number","line":"13","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
d3:["$","span",null,{"className":"code-line line-number","line":"14","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
d4:["$","span",null,{"className":"code-line line-number","line":"15","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
d5:["$","span",null,{"className":"code-line line-number","line":"16","children":"\n"}]
d6:["$","span",null,{"className":"code-line line-number","line":"17","children":[["$","span",null,{"className":"token comment","children":"// 🔑 핵심: CORS 문제 해결을 위한 커스텀 로더"}],"\n"]}]
d7:["$","span",null,{"className":"code-line line-number","line":"18","children":[["$","span",null,{"className":"token keyword","children":"const"}]," corsProxyLoader",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token function-variable function","children":"ImageLoader"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," src",["$","span",null,{"className":"token punctuation","children":","}]," width",["$","span",null,{"className":"token punctuation","children":","}]," quality ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
d8:["$","span",null,{"className":"code-line line-number","line":"19","children":["  ",["$","span",null,{"className":"token comment","children":"// 외부 도메인 이미지면 프록시를 통해 로드"}],"\n"]}]
d9:["$","span",null,{"className":"code-line line-number","line":"20","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"isExternalImage"}],["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
da:["$","span",null,{"className":"code-line line-number","line":"21","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token string","children":"/api/image-proxy?url="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],["$","span",null,{"className":"token function","children":"encodeURIComponent"}],["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"&w="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"width",["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"&q="}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"quality ",["$","span",null,{"className":"token operator","children":"||"}]," ",["$","span",null,{"className":"token number","children":"75"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
db:["$","span",null,{"className":"code-line line-number","line":"22","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
dc:["$","span",null,{"className":"code-line line-number","line":"23","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," src",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// 내부 이미지는 그대로 사용"}],"\n"]}]
dd:["$","span",null,{"className":"code-line line-number","line":"24","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
de:["$","span",null,{"className":"code-line line-number","line":"25","children":"\n"}]
df:["$","span",null,{"className":"code-line line-number","line":"26","children":[["$","span",null,{"className":"token keyword","children":"interface"}]," ",["$","span",null,{"className":"token class-name","children":"ProxyImageProps"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," ",["$","span",null,{"className":"token class-name","children":["Omit",["$","span",null,{"className":"token operator","children":"<"}],"ImageProps",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'loader'"}],["$","span",null,{"className":"token operator","children":">"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
e0:["$","span",null,{"className":"code-line line-number","line":"27","children":["  fallbackSrc",["$","span",null,{"className":"token operator","children":"?"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
e1:["$","span",null,{"className":"code-line line-number","line":"28","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
e2:["$","span",null,{"className":"code-line line-number","line":"29","children":"\n"}]
e3:["$","span",null,{"className":"code-line line-number","line":"30","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"ProxyImage"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," fallbackSrc",["$","span",null,{"className":"token punctuation","children":","}]," onError",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"..."}],"props ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ProxyImageProps",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
e4:["$","span",null,{"className":"code-line line-number","line":"31","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"error",["$","span",null,{"className":"token punctuation","children":","}]," setError",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
e5:["$","span",null,{"className":"code-line line-number","line":"32","children":"\n"}]
e6:["$","span",null,{"className":"code-line line-number","line":"33","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"handleError"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token operator","children":":"}]," React",["$","span",null,{"className":"token punctuation","children":"."}],"SyntheticEvent",["$","span",null,{"className":"token operator","children":"<"}],"HTMLImageElement",["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
e7:["$","span",null,{"className":"code-line line-number","line":"34","children":["    ",["$","span",null,{"className":"token function","children":"setError"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
e8:["$","span",null,{"className":"code-line line-number","line":"35","children":["    onError",["$","span",null,{"className":"token operator","children":"?."}],["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
e9:["$","span",null,{"className":"code-line line-number","line":"36","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
ea:["$","span",null,{"className":"code-line line-number","line":"37","children":"\n"}]
eb:["$","span",null,{"className":"code-line line-number","line":"38","children":["  ",["$","span",null,{"className":"token comment","children":"// 에러 시 fallback 이미지 표시"}],"\n"]}]
ec:["$","span",null,{"className":"code-line line-number","line":"39","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"error ",["$","span",null,{"className":"token operator","children":"&&"}]," fallbackSrc",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
ed:["$","span",null,{"className":"code-line line-number","line":"40","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}]
ee:["$","span",null,{"className":"code-line line-number","line":"41","children":["      ",["$","span",null,{"className":"token operator","children":"<"}],"Image\n"]}]
ef:["$","span",null,{"className":"code-line line-number","line":"42","children":["        ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],"props",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
f0:["$","span",null,{"className":"code-line line-number","line":"43","children":["        src",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"fallbackSrc",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
f1:["$","span",null,{"className":"code-line line-number","line":"44","children":["        loader",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"corsProxyLoader",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
f2:["$","span",null,{"className":"code-line line-number","line":"45","children":["        crossOrigin",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"anonymous\""}],"\n"]}]
f3:["$","span",null,{"className":"code-line line-number","line":"46","children":["        onError",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"handleError",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
f4:["$","span",null,{"className":"code-line line-number","line":"47","children":["      ",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":">"}],"\n"]}]
f5:["$","span",null,{"className":"code-line line-number","line":"48","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
f6:["$","span",null,{"className":"code-line line-number","line":"49","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
f7:["$","span",null,{"className":"code-line line-number","line":"50","children":"\n"}]
f8:["$","span",null,{"className":"code-line line-number","line":"51","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}]
f9:["$","span",null,{"className":"code-line line-number","line":"52","children":["    ",["$","span",null,{"className":"token operator","children":"<"}],"Image\n"]}]
fa:["$","span",null,{"className":"code-line line-number","line":"53","children":["      ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],"props",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
fb:["$","span",null,{"className":"code-line line-number","line":"54","children":["      loader",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"corsProxyLoader",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
fc:["$","span",null,{"className":"code-line line-number","line":"55","children":["      crossOrigin",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"anonymous\""}],"\n"]}]
fd:["$","span",null,{"className":"code-line line-number","line":"56","children":["      onError",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"handleError",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
fe:["$","span",null,{"className":"code-line line-number","line":"57","children":["    ",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":">"}],"\n"]}]
ff:["$","span",null,{"className":"code-line line-number","line":"58","children":["  ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
100:["$","span",null,{"className":"code-line line-number","line":"59","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
101:["$","span",null,{"className":"code-line line-number","line":"14","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
102:["$","span",null,{"className":"code-line line-number","line":"15","children":"\n"}]
103:["$","span",null,{"className":"code-line line-number","line":"16","children":["    ",["$","span",null,{"className":"token comment","children":"// 이미지 다운로드"}],"\n"]}]
104:["$","span",null,{"className":"code-line line-number","line":"17","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," link ",["$","span",null,{"className":"token operator","children":"="}]," document",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"createElement"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'a'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
105:["$","span",null,{"className":"code-line line-number","line":"18","children":["    link",["$","span",null,{"className":"token punctuation","children":"."}],"download ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token string","children":"capture-"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"Date",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"now"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":".png"}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
106:["$","span",null,{"className":"code-line line-number","line":"19","children":["    link",["$","span",null,{"className":"token punctuation","children":"."}],"href ",["$","span",null,{"className":"token operator","children":"="}]," canvas",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"toDataURL"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'image/png'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
107:["$","span",null,{"className":"code-line line-number","line":"20","children":["    link",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"click"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
108:["$","span",null,{"className":"code-line line-number","line":"21","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"error",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
109:["$","span",null,{"className":"code-line line-number","line":"22","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'캡처 실패:'"}],["$","span",null,{"className":"token punctuation","children":","}]," error",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
10a:["$","span",null,{"className":"code-line line-number","line":"23","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
10b:["$","span",null,{"className":"code-line line-number","line":"24","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
10c:["$","span",null,{"className":"token punctuation","children":";"}]
10d:["$","span",null,{"className":"code-line line-number","line":"13","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"cached ",["$","span",null,{"className":"token operator","children":"&&"}]," Date",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"now"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," cached",["$","span",null,{"className":"token punctuation","children":"."}],"timestamp ",["$","span",null,{"className":"token operator","children":"<"}]," ",["$","span",null,{"className":"token constant","children":"CACHE_DURATION"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
10e:["$","span",null,{"className":"code-line line-number","line":"14","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"NextResponse"}],["$","span",null,{"className":"token punctuation","children":"("}],"cached",["$","span",null,{"className":"token punctuation","children":"."}],"data",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
10f:["$","span",null,{"className":"code-line line-number","line":"15","children":["      headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
110:["$","span",null,{"className":"code-line line-number","line":"16","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Content-Type'"}],["$","span",null,{"className":"token operator","children":":"}]," cached",["$","span",null,{"className":"token punctuation","children":"."}],"contentType",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
111:["$","span",null,{"className":"code-line line-number","line":"17","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Origin'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'*'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
112:["$","span",null,{"className":"code-line line-number","line":"18","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Cache-Control'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'public, max-age=300'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
113:["$","span",null,{"className":"code-line line-number","line":"19","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
114:["$","span",null,{"className":"code-line line-number","line":"20","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
115:["$","span",null,{"className":"code-line line-number","line":"21","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
116:["$","span",null,{"className":"code-line line-number","line":"22","children":"  \n"}]
117:["$","span",null,{"className":"code-line line-number","line":"23","children":["  ",["$","span",null,{"className":"token comment","children":"// fetch 후 캐시에 저장"}],"\n"]}]
118:["$","span",null,{"className":"code-line line-number","line":"24","children":["  imageCache",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageUrl",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
119:["$","span",null,{"className":"code-line line-number","line":"25","children":["    data",["$","span",null,{"className":"token operator","children":":"}]," imageBuffer",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
11a:["$","span",null,{"className":"code-line line-number","line":"26","children":["    contentType",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
11b:["$","span",null,{"className":"code-line line-number","line":"27","children":["    timestamp",["$","span",null,{"className":"token operator","children":":"}]," Date",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"now"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
11c:["$","span",null,{"className":"code-line line-number","line":"28","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
11d:["$","span",null,{"className":"code-line line-number","line":"29","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
11e:["$","span",null,{"className":"token punctuation","children":";"}]
11f:["$","span",null,{"className":"code-line line-number","line":"13","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"cached ",["$","span",null,{"className":"token operator","children":"&&"}]," Date",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"now"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," cached",["$","span",null,{"className":"token punctuation","children":"."}],"timestamp ",["$","span",null,{"className":"token operator","children":"<"}]," ",["$","span",null,{"className":"token constant","children":"CACHE_DURATION"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
120:["$","span",null,{"className":"code-line line-number","line":"14","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"NextResponse"}],["$","span",null,{"className":"token punctuation","children":"("}],"cached",["$","span",null,{"className":"token punctuation","children":"."}],"data",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
121:["$","span",null,{"className":"code-line line-number","line":"15","children":["      headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
122:["$","span",null,{"className":"code-line line-number","line":"16","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Content-Type'"}],["$","span",null,{"className":"token operator","children":":"}]," cached",["$","span",null,{"className":"token punctuation","children":"."}],"contentType",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
123:["$","span",null,{"className":"code-line line-number","line":"17","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Access-Control-Allow-Origin'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'*'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
124:["$","span",null,{"className":"code-line line-number","line":"18","children":["        ",["$","span",null,{"className":"token string-property property","children":"'Cache-Control'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'public, max-age=300'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
125:["$","span",null,{"className":"code-line line-number","line":"19","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
126:["$","span",null,{"className":"code-line line-number","line":"20","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
127:["$","span",null,{"className":"code-line line-number","line":"21","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
128:["$","span",null,{"className":"code-line line-number","line":"22","children":"  \n"}]
129:["$","span",null,{"className":"code-line line-number","line":"23","children":["  ",["$","span",null,{"className":"token comment","children":"// fetch 후 캐시에 저장"}],"\n"]}]
12a:["$","span",null,{"className":"code-line line-number","line":"24","children":["  imageCache",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],"imageUrl",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
12b:["$","span",null,{"className":"code-line line-number","line":"25","children":["    data",["$","span",null,{"className":"token operator","children":":"}]," imageBuffer",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
12c:["$","span",null,{"className":"code-line line-number","line":"26","children":["    contentType",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
12d:["$","span",null,{"className":"code-line line-number","line":"27","children":["    timestamp",["$","span",null,{"className":"token operator","children":":"}]," Date",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"now"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
12e:["$","span",null,{"className":"code-line line-number","line":"28","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
12f:["$","span",null,{"className":"code-line line-number","line":"29","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
16:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
12:null
130:I[80622,[],"IconMark"]
14:{"metadata":[["$","title","0",{"children":"Next.js 15에서 html2canvas CORS 에러 해결하기: 이미지 프록시 솔루션 | Blog"}],["$","meta","1",{"name":"description","content":"html2canvas 사용 시 외부 CDN 이미지로 인한 CORS 에러를 Next.js API Route 프록시로 완벽 해결한 과정과 다양한 해결 방법들을 상세히 소개합니다."}],["$","meta","2",{"name":"author","content":"zeke"}],["$","meta","3",{"name":"keywords","content":"Next.js, html2canvas, CORS, React, TypeScript, 이미지 프록시"}],["$","meta","4",{"name":"creator","content":"zeke"}],["$","meta","5",{"name":"publisher","content":"Blog"}],["$","meta","6",{"name":"robots","content":"index, follow"}],["$","meta","7",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","meta","8",{"name":"google-site-verification","content":"wjBK5vsP3u8w2Mb0BHXkojvPGQ56soPTBYg2fU5dg5k"}],["$","meta","9",{"property":"og:title","content":"Next.js 15에서 html2canvas CORS 에러 해결하기: 이미지 프록시 솔루션 | Blog"}],["$","meta","10",{"property":"og:description","content":"html2canvas 사용 시 외부 CDN 이미지로 인한 CORS 에러를 Next.js API Route 프록시로 완벽 해결한 과정과 다양한 해결 방법들을 상세히 소개합니다."}],["$","meta","11",{"property":"og:url","content":"https://leeduhan.github.io/posts/react/2025-08-19-html2canvas_cors_guide"}],["$","meta","12",{"property":"og:site_name","content":"Blog"}],["$","meta","13",{"property":"og:image","content":"https://leeduhan.github.io/og-image.jpg"}],["$","meta","14",{"property":"og:image:width","content":"1200"}],["$","meta","15",{"property":"og:image:height","content":"630"}],["$","meta","16",{"property":"og:image:alt","content":"Next.js 15에서 html2canvas CORS 에러 해결하기: 이미지 프록시 솔루션"}],["$","meta","17",{"property":"og:type","content":"article"}],["$","meta","18",{"property":"article:published_time","content":"2025-08-19"}],["$","meta","19",{"property":"article:author","content":"zeke"}],["$","meta","20",{"property":"article:tag","content":"Next.js"}],["$","meta","21",{"property":"article:tag","content":"html2canvas"}],["$","meta","22",{"property":"article:tag","content":"CORS"}],["$","meta","23",{"property":"article:tag","content":"React"}],["$","meta","24",{"property":"article:tag","content":"TypeScript"}],["$","meta","25",{"property":"article:tag","content":"이미지 프록시"}],["$","meta","26",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","27",{"name":"twitter:creator","content":"@zeke"}],["$","meta","28",{"name":"twitter:title","content":"Next.js 15에서 html2canvas CORS 에러 해결하기: 이미지 프록시 솔루션 | Blog"}],["$","meta","29",{"name":"twitter:description","content":"html2canvas 사용 시 외부 CDN 이미지로 인한 CORS 에러를 Next.js API Route 프록시로 완벽 해결한 과정과 다양한 해결 방법들을 상세히 소개합니다."}],["$","meta","30",{"name":"twitter:image","content":"https://leeduhan.github.io/og-image.jpg"}],["$","link","31",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","$L130","32",{}]],"error":null,"digest":"$undefined"}
19:"$14:metadata"
